#!/usr/bin/make -f

include /usr/share/dpkg/pkg-info.mk

ANDROID_VERSION = $(shell echo $(DEB_VERSION_UPSTREAM) | sed --expression="s/\+r.*//")
GRADLE_FLAGS = --project-prop androidVersion=$(ANDROID_VERSION) \
               --settings-file debian/settings.gradle
UPSTREAM_TAG = android-$(subst +,_,$(DEB_VERSION_UPSTREAM))

%:
	dh $@ --buildsystem=gradle --with maven_repo_helper

override_dh_auto_build:
	dh_auto_build -- assemble $(GRADLE_FLAGS)

get-orig-source:
	wget --continue https://android.googlesource.com/platform/external/doclava/+archive/$(UPSTREAM_TAG).tar.gz
