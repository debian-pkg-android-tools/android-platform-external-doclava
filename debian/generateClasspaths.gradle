task generateClasspaths {
    def classpathsFile = file("${buildDir}/classpaths")
    outputs.files classpathsFile
    assemble.dependsOn generateClasspaths
    doFirst {
        mkdir buildDir
        classpathsFile.createNewFile()
        classpathsFile.write(configurations.runtime.toSorted().join(':'))
    }
    clean.doLast { delete classpathsFile }
}